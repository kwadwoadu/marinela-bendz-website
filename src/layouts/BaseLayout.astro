---
interface Props {
  title?: string;
  description?: string;
  image?: string;
}

const {
  title = "Marinela Bendz | Property Hunter Barcelona",
  description = "Your trusted advisor for luxury homes and investment properties in Barcelona. Exclusive buyer representation with fixed fee transparency.",
  image = "/images/og-image.jpg"
} = Astro.props;

const siteUrl = Astro.site || new URL('https://marinelabendz.com');
const canonicalURL = new URL(Astro.url.pathname, siteUrl);
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="generator" content={Astro.generator} />

  <!-- Primary Meta Tags -->
  <title>{title}</title>
  <meta name="title" content={title} />
  <meta name="description" content={description} />

  <!-- Canonical -->
  <link rel="canonical" href={canonicalURL} />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={image} />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content={canonicalURL} />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={image} />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;500;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Pinyon+Script&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet" />

  <!-- Styles are imported via <style is:global> at bottom of this file -->
</head>
<body class="antialiased">
  <slot />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Marinela Bendz - Property Hunter",
    "description": "Luxury property hunter and buyer's agent in Barcelona",
    "url": "https://marinelabendz.com",
    "areaServed": "Barcelona, Spain",
    "priceRange": "€€€€",
    "serviceType": ["Real Estate Buyer's Agent", "Property Hunter", "Investment Property Advisor"]
  }
  </script>

  <!-- Scroll-triggered animations (2025 Standard) -->
  <script>
    // Only run if user doesn't prefer reduced motion
    if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });

      // Observe all scroll-animate elements
      document.querySelectorAll('.scroll-animate, .scroll-animate-scale, .scroll-animate-left, .scroll-animate-right').forEach(el => {
        observer.observe(el);
      });
    } else {
      // For reduced motion, make everything visible immediately
      document.querySelectorAll('.scroll-animate, .scroll-animate-scale, .scroll-animate-left, .scroll-animate-right').forEach(el => {
        el.classList.add('in-view');
      });
    }
  </script>
</body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
